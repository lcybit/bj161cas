<!DOCTYPE html>
<html>

<head>
<title>排课信息展示</title>
<link rel="stylesheet" href="/plugin/layui/css/layui.css" />
<script src="/plugin/jquery/jquery.js"></script>
<script src="/plugin/jquery/jquery.serializejson.js"></script>
<script src="/plugin/jsrender/jsrender.js"></script>
</head>

<body>
  <div class="layui-container" style="width:100%;">
    <div class="layui-row" id="scheduleView">
    </div>
  </div>
  <script id="tmpl-scheduleView" type="text/x-jsrender">
    <table class="layui-table" lay=size="sm">
      <tr>
        {{for courseList tmpl="#tmpl-course" /}}
      </tr>
    </table>
    {{for weekViewList tmpl="#tmpl-weekView" /}}
  </script>
  <script id="tmpl-weekView" type="text/x-jsrender">
    <div class="layui-col-md3">
      <table class="layui-table" lay-size="sm">
        <tbody>
          <tr>
            <td rowspan="2"></td>
            <td colspan="{{:#parent.parent.data.schedule.forenoon}}">上午</td>
            <td colspan="{{:#parent.parent.data.schedule.afternoon}}">下午</td>
          </tr>
          <tr>
            <td>早</td>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
            <td>7</td>
          </tr>
			{{for dayViewList tmpl="#tmpl-dayView" /}}
        </tbody>
      </table>
      <table class="layui-table" lay-size="sm">
        <tr>
          {{for courseViewList tmpl="#tmpl-courseView" /}}
        </tr>
      </table>
    </div>
  </script>
  <script id="tmpl-course" type="text/x-jsrender">
    <td>{{:courseNo}}
  </script>
  <script id="tmpl-dayView" type="text/x-jsrender">
    <tr>
      <td>{{:#getIndex() +1}}</td>
      {{for arrangementViewList tmpl="#tmpl-arrangementView" /}}
    </tr>
  </script>
  <script id="tmpl-courseView" type="text/x-jsrender">
    <td>{{:course.courseNo+unArrangedNum}}</td>
  </script>
  <script id="tmpl-arrangementView" type="text/x-jsrender">
	<td id="{{:arrangementId}}" style="cursor:pointer" onclick="alert()">{{:periodId}}</td>
  </script>
  <script>
    $(document).ready(function() {
      var scheduleId = sessionStorage.getItem('currentScheduleId');
      $.ajax({
        async : false,
        url : '/schedule/display/' + scheduleId,
        type : 'GET',
        success : function(scheduleView) {
          $('#scheduleView').append($.templates('#tmpl-scheduleView').render(scheduleView));
        }
      });
    })

  </script>
</body>

</html>
